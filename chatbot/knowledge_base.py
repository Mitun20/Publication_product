PROJECT_KNOWLEDGE = {
   # === GENERAL/GREETINGS ===
   "hi": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "hello": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "hey": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "greetings": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "good morning": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "good afternoon": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "howdy": "Hello! I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
   "help": "I assist with manuscript workflows. Examples: 'Author: How to submit?', 'Admin: Check plagiarism?', or 'Reviewer: Submit Reviews?'.",
   "support": "I assist with manuscript workflows. Examples: 'Author: How to submit?', 'Admin: Check plagiarism?', or 'Reviewer: Submit Reviews?'.",
   "guide me": "I assist with manuscript workflows. Examples: 'Author: How to submit?', 'Admin: Check plagiarism?', or 'Reviewer: Submit Reviews?'.",
   "what can you do?": "I assist with manuscript workflows. Examples: 'Author: How to submit?', 'Admin: Check plagiarism?', or 'Reviewer: Submit Reviews?'.",

   # === AUTHOR-SPECIFIC ===
   # Submission Process
   
   "steps to submit a paper": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "manuscript submission process": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "what are the submission steps": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "how do i start a submission": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "how to submit a manuscript": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "how to submit a paper": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "how to submit a manuscript online": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   "How do I submit my article": "1) Login/Register \n 2) Click 'Begin New Submission' \n 3) Enter title/abstract \n 4) Upload files \n 5) Add keywords \n 6) Author details \n 7) Cover letter \n 8) Review & submit.",
   
   # File Upload
   "where to upload manuscript": "In Step 2 (File Upload), click 'Choose File'. Supported formats: PDF/DOCX. Use 'Add File' for multiple uploads.",
   "how to attach files": "In Step 2 (File Upload), click 'Choose File'. Supported formats: PDF/DOCX. Use 'Add File' for multiple uploads.",
   "file upload steps": "In Step 2 (File Upload), click 'Choose File'. Supported formats: PDF/DOCX. Use 'Add File' for multiple uploads.",
   "can i upload multiple files": "Yes! In Step 2, use 'Add File' for each additional document after the first upload.",
   "what formats are accepted": "Typically PDF, DOCX, or LaTeX files. Check the journal's guidelines for specifics.",

   # Co-authors
   "how to add co-authors": "In Step 4 (Authors & Affiliations), enter each author’s Name, Email, and Affiliation. Click 'Add Author' if needed.",
   "include collaborators": "In Step 4 (Authors & Affiliations), enter each author’s Name, Email, and Affiliation. Click 'Add Author' if needed.",
   "author affiliation steps": "In Step 4 (Authors & Affiliations), enter each author’s Name, Email, and Affiliation. Click 'Add Author' if needed.",

   # Post-Submission
   "can i edit after submission": "No direct edits post-submission. Contact the admin office for corrections.",
   "change manuscript after uploading": "No direct edits post-submission. Contact the admin office for corrections.",
   "fix errors in submitted paper": "No direct edits post-submission. Contact the admin office for corrections.",

   # === ADMIN-SPECIFIC ===
   # Plagiarism Check
   "how to check plagiarism": "Use an online plagiarism tool, then upload the report in the 'Manuscripts Submitted' section.",
   "run similarity test": "Use an online plagiarism tool, then upload the report in the 'Manuscripts Submitted' section.",
   "upload plagiarism report": "After generating the report, attach it to the manuscript in 'Manuscripts Submitted'.",
    "I need to export an Excel file": "Yes, there is an option to export an Excel file in the ‘Manuscripts with Acceptance’ tab. Click that to export the Excel file. It exports only the accepted papers.",

   # Rejecting Manuscripts
   "how to reject a paper": "Click 'Reject' in the selected paper's row, add comments, and notify the author.",
   "decline submission steps": "Click 'Reject' in the selected paper's row, add comments, and notify the author.",

   # Assigning Editors
   "how to assign ae": "Under 'Manuscripts Submitted', click 'Assign AE' and select an editor from the list.",
   "steps to select associate editor": "Under 'Manuscripts Submitted', click 'Assign AE' and select an editor from the list.",

   # === ASSOCIATE EDITOR (AE) ===
   # Inviting Reviewers
   "how to invite reviewers": "Under 'Manuscripts to Review', click 'Invite' and select reviewers. They’ll receive an email.",
   "add referees to manuscript": "Under 'Manuscripts to Review', click 'Invite' and select reviewers. They’ll receive an email.",

   # Post-Review Actions
   "what to do after reviews": "Evaluate reviewer comments, then click 'Recommend' to send to the Editor-in-Chief (EIC).",
   "how to forward to eic": "Click 'Recommend' in 'Manuscripts with Review Reports' to send the manuscript to the EIC.",

   # === REVIEWER ===
   # Accept/Decline Review
   "how to accept review request": "Under 'Invitation', click 'Accept'. You’ll see the manuscript in 'Manuscripts to Review'.",
   "decline to review": "Under 'Invitation', click 'Reject' to decline the review request.",

   # Submit Review
   "where to upload review comments": "Under 'Manuscripts to Review', click 'Recommend' to submit your comments.",
   "how to submit review": "Under 'Manuscripts to Review', click 'Recommend' to submit your comments.",
   
   # === EDITOR-IN-CHIEF (EIC) ===
   "how to make final decision": "Under 'Manuscripts Waiting for Decision', review AE/reviewer comments, then click 'Make Decision'.",
   "accept/reject manuscript steps": "Under 'Manuscripts Waiting for Decision', review AE/reviewer comments, then click 'Make Decision'.",
   "final decision process": "Under 'Manuscripts Waiting for Decision', review AE/reviewer comments, then click 'Make Decision'.",
   "finalize manuscript": "Under 'Manuscripts Waiting for Decision', review AE/reviewer comments, then click 'Make Decision'.",
   
   # === DEFAULT RESPONSE ===
   "default": "I am your assistant. Please specify your role (Author/Admin/Associate Editor/Reviewer/EIC) and question.",
}
def get_answer(question):
    question = question.lower().strip()
    
    # First check exact matches
    if question in PROJECT_KNOWLEDGE:
        return PROJECT_KNOWLEDGE[question]
    
    # Then check keyword matches
    keyword_map = {
        # Author keywords
         "submit": "How do I submit my article",
         "publish": "How do I submit my article",
         "upload file": "where to upload",
         "file upload": "where to upload manuscript",
         "co-authors": "how to add co-authors",
         "edit submission": "can i edit after submission",
         
         # Admin keywords
         "plagiarism": "how to check plagiarism",
         "reject": "how to reject a paper",
         "decline": "how to reject a paper",
         "assign ae": "how to assign ae",
         
         # Associate Editor keywords
         "invite reviewer": "how to invite reviewers",
         "add referee": "add referees to manuscript",
         "post review": "what to do after reviews",
         "forward to eic": "what to do after reviews",
         "recommend": "what to do after reviews",
         "submit review": "where to upload review comments",
         
         # Reviewer keywords
         "accept invitation": "accept review",
         "decline invitation": "decline to review",
         "reject invitation": "decline to review",
         
         # Editor keywords
         "decision": "make decision"
    }
    
    for keyword, response_key in keyword_map.items():
        if keyword in question:
            return PROJECT_KNOWLEDGE[response_key]
    
    # Fallback with suggestions
    return ("I can help with:\n"
            "- Submission questions (upload, status)\n"
            "- Review processes (Review, accept\Reject)\n"
            "- Editorial decisions\n\n"
           )